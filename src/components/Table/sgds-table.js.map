{"version":3,"file":"sgds-table.js","sourceRoot":"","sources":["sgds-table.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,IAAI,EAAE,MAAM,KAAK,CAAC;AAC3B,OAAO,EAAE,QAAQ,EAAE,KAAK,EAAE,MAAM,mBAAmB,CAAC;AACpD,OAAO,EAAE,QAAQ,EAAE,MAAM,6BAA6B,CAAC;AACvD,OAAO,WAAW,MAAM,yBAAyB,CAAC;AAClD,OAAO,UAAU,MAAM,aAAa,CAAC;AACrC;;;;;;;;;;;GAWG;AAEH,MAAM,OAAO,SAAU,SAAQ,WAAW;IAA1C;;QAGE;;WAEG;QACyC,YAAO,GAAG,KAAK,CAAC;QAE5D;;WAEG;QACyC,aAAQ,GAAG,KAAK,CAAC;QAE7D;;WAEG;QACyC,eAAU,GAAG,KAAK,CAAC;QAE/D;;WAEG;QACyC,UAAK,GAAG,KAAK,CAAC;QAY1D;;WAEG;QACyC,SAAI,GAAG,KAAK,CAAC;QAEzD;;WAEG;QACyC,kBAAa,GAAG,KAAK,CAAC;QAOlE;;WAEG;QACwB,iBAAY,GAAa,EAAE,CAAC;QAEvD;;WAEG;QACwB,cAAS,GAA+B,EAAE,CAAC;QAEtE,gBAAgB;QACP,eAAU,GAAkB,IAAI,CAAC;QAE1C,gBAAgB;QACP,YAAO,GAAG,IAAI,CAAC;QAExB,gBAAgB;QAEhB,gBAAgB;QACP,iBAAY,GAAkB,IAAI,CAAC;QAE5C,gBAAgB;QACP,mBAAc,GAAG,CAAC,CAAC;QAE5B,gBAAgB;QACP,eAAU,GAAG,CAAC,CAAC;QAExB,gBAAgB;QACP,sBAAiB,GAA+B,EAAE,CAAC;IAqJ9D,CAAC;IAnJC,iBAAiB;QACf,KAAK,CAAC,iBAAiB,EAAE,CAAC;QAC1B,IAAI,CAAC,iBAAiB,GAAG,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC;IAC/C,CAAC;IAED,iBAAiB,CAAC,WAAmB;;QACnC,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC;YACd,IAAI,IAAI,CAAC,UAAU,KAAK,WAAW,EAAE,CAAC;gBACpC,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC;YAC/B,CAAC;iBAAM,CAAC;gBACN,IAAI,CAAC,UAAU,GAAG,WAAW,CAAC;gBAC9B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YACtB,CAAC;YAED,IAAI,CAAC,SAAS,GAAG,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;gBACjD,MAAM,MAAM,GAAG,CAAC,CAAC,WAAW,CAAC,CAAC;gBAC9B,MAAM,MAAM,GAAG,CAAC,CAAC,WAAW,CAAC,CAAC;gBAE9B,IAAI,OAAO,MAAM,KAAK,QAAQ,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE,CAAC;oBAC7D,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;gBACpF,CAAC;qBAAM,CAAC;oBACN,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAE,MAAiB,GAAI,MAAiB,CAAC,CAAC,CAAE,MAAiB,GAAI,MAAiB,CAAC;gBAC1G,CAAC;YACH,CAAC,CAAC,CAAC;YAEH,2BAA2B;YAC3B,IAAI,IAAI,CAAC,YAAY,KAAK,WAAW,EAAE,CAAC;gBACtC,IAAI,CAAC,UAAU,EAAE,CAAC;gBAClB,IAAI,IAAI,CAAC,UAAU,KAAK,CAAC,IAAI,IAAI,CAAC,aAAa,EAAE,CAAC;oBAChD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;oBACzB,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;oBACpB,IAAI,CAAC,SAAS,GAAG,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,CAAC;gBAC/C,CAAC;YACH,CAAC;iBAAM,CAAC;gBACN,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;gBAChC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;YACtB,CAAC;YAED,mDAAmD;YACnD,MAAM,UAAU,GAAG,MAAA,IAAI,CAAC,UAAU,0CAAE,gBAAgB,CAAC,IAAI,CAAC,CAAC;YAC3D,UAAU,CAAC,OAAO,CAAC,CAAC,SAAS,EAAE,KAAK,EAAE,EAAE;gBACtC,IAAI,KAAK,KAAK,WAAW,EAAE,CAAC;oBAC1B,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;gBACpC,CAAC;qBAAM,CAAC;oBACN,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;gBACvC,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IAED,OAAO,CAAC,WAAmB;QACzB,IAAI,IAAI,CAAC,YAAY,KAAK,WAAW,EAAE,CAAC;YACtC,OAAO,IAAI,CAAA;;;;;;;;;;;;aAYJ,CAAC;QACV,CAAC;aAAM,CAAC;YACN,OAAO,IAAI,CAAC,OAAO;gBACjB,CAAC,CAAC,IAAI,CAAA;;;;;;;;;;;iBAWG;gBACT,CAAC,CAAC,IAAI,CAAA;;;;;;;;;;;iBAWG,CAAC;QACd,CAAC;IACH,CAAC;IAED,MAAM;QACJ,OAAO,IAAI,CAAA;;gBAEC,QAAQ,CAAC;YACf,kBAAkB,EAAE,IAAI,CAAC,UAAU,KAAK,QAAQ;YAChD,qBAAqB,EAAE,IAAI,CAAC,UAAU,KAAK,IAAI;YAC/C,qBAAqB,EAAE,IAAI,CAAC,UAAU,KAAK,IAAI;YAC/C,qBAAqB,EAAE,IAAI,CAAC,UAAU,KAAK,IAAI;YAC/C,qBAAqB,EAAE,IAAI,CAAC,UAAU,KAAK,IAAI;SAChD,CAAC;;;;8BAIoB,QAAQ,CAAC;YAC3B,CAAC,eAAe,CAAC,EAAE,IAAI,CAAC,OAAO;YAC/B,CAAC,gBAAgB,CAAC,EAAE,IAAI,CAAC,QAAQ;YACjC,CAAC,kBAAkB,CAAC,EAAE,IAAI,CAAC,UAAU;YACrC,CAAC,aAAa,CAAC,EAAE,IAAI,CAAC,KAAK;YAC3B,CAAC,SAAS,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI;YACjC,CAAC,SAAS,IAAI,CAAC,OAAO,EAAE,CAAC,EAAE,IAAI,CAAC,OAAO;SACxC,CAAC;;;;gBAII,IAAI,CAAC,YAAY,CAAC,GAAG,CACrB,CAAC,MAAc,EAAE,KAAa,EAAE,EAAE,CAAC,IAAI,CAAA;;6BAE1B,QAAQ,CAAC;YAChB,iBAAiB,EAAE,IAAI,CAAC,IAAI;YAC5B,MAAM,EAAE,IAAI,CAAC,YAAY,KAAK,KAAK;SACpC,CAAC;6BACO,GAAG,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC;;;sBAG1C,MAAM,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI;;iBAErD,CACF;;;;cAID,IAAI,CAAC,SAAS,CAAC,GAAG,CAClB,GAAG,CAAC,EAAE,CAAC,IAAI,CAAA;;oBAEL,GAAG,CAAC,GAAG,CAAC,CAAC,IAAY,EAAE,EAAE,CAAC,IAAI,CAAA,OAAO,IAAI,OAAO,CAAC;;eAEtD,CACF;;;;KAIR,CAAC;IACJ,CAAC;;AA/NM,gBAAM,GAAG,CAAC,GAAG,WAAW,CAAC,MAAM,EAAE,UAAU,CAAC,AAAtC,CAAuC;AAKR;IAA3C,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;0CAAiB;AAKhB;IAA3C,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;2CAAkB;AAKjB;IAA3C,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;6CAAoB;AAKnB;IAA3C,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;wCAAe;AAKf;IAA1C,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;uCAAc;AAKb;IAA1C,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;0CAAiB;AAKf;IAA3C,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;uCAAc;AAKb;IAA3C,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;gDAAuB;AAKvB;IAA1C,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;6CAAkD;AAKjE;IAA1B,QAAQ,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;+CAA6B;AAK5B;IAA1B,QAAQ,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;4CAA4C;AAG7D;IAAR,KAAK,EAAE;6CAAkC;AAGjC;IAAR,KAAK,EAAE;0CAAgB;AAKf;IAAR,KAAK,EAAE;+CAAoC;AAGnC;IAAR,KAAK,EAAE;iDAAoB;AAGnB;IAAR,KAAK,EAAE;6CAAgB;AAGf;IAAR,KAAK,EAAE;oDAAoD;AAuJ9D,eAAe,SAAS,CAAC","sourcesContent":["import { html } from \"lit\";\nimport { property, state } from \"lit/decorators.js\";\nimport { classMap } from \"lit/directives/class-map.js\";\nimport SgdsElement from \"../../base/sgds-element\";\nimport tableStyle from \"./table.css\";\n/**\n * @summary The use of a table is to organise a collections of data into readable rows\n *\n * @cssproperty --table-bg - Table's background color\n * @cssproperty --table-accent-bg - Table's accent background color\n * @cssproperty --table-striped-color - Text color for striped table\n * @cssproperty --table-striped-bg - Background color for striped table\n * @cssproperty --table-active-color - Active text color for hovered row\n * @cssproperty --table-active-bg - Active background color for hovered row\n * @cssproperty --table-hover-color - Hovered text color for hover table\n * @cssproperty --table-hover-bg - Hovered background color for hover table\n */\n\nexport class SgdsTable extends SgdsElement {\n  static styles = [...SgdsElement.styles, tableStyle];\n\n  /**\n   * Adds zebra-striping using striped to table row within the <tbody>\n   */\n  @property({ type: Boolean, reflect: true }) striped = false;\n\n  /**\n   * Add borders to all sides of table and cells\n   */\n  @property({ type: Boolean, reflect: true }) bordered = false;\n\n  /**\n   * Remove all borders to table and cells\n   */\n  @property({ type: Boolean, reflect: true }) borderless = false;\n\n  /**\n   * Add hoverable state on table rows\n   */\n  @property({ type: Boolean, reflect: true }) hover = false;\n\n  /**\n   * Add <code>.table-sm</code> to make table more compact\n   */\n  @property({ type: String, reflect: true }) size: string;\n\n  /**\n   * Use contextual classes to add colors to table\n   */\n  @property({ type: String, reflect: true }) variant: string;\n\n  /**\n   * Sorting on a column is enabled by adding the sort property. The sorting algorithm is based on javascript array.sort() method. In ascending order from bottom, alphabets come first, followed by numbers, and then symbols. Similarly, in descending order from bottom, symbols come first, followed by numbers, and then alphabets.\n   */\n  @property({ type: Boolean, reflect: true }) sort = false;\n\n  /**\n   * When removableSort is present, the third click removes the sorting from the column.\n   */\n  @property({ type: Boolean, reflect: true }) removableSort = false;\n\n  /**\n   * Use responsive=\"sm\", responsive=\"md\" , responsive=\"lg\", or responsive=\"xl\" as needed to create responsive tables up to a particular breakpoint. From that breakpoint and up, the table will behave normally and not scroll horizontally. Use reponsive=\"always\" to let table be always responsive\n   */\n  @property({ type: String, reflect: true }) responsive: \"sm\" | \"md\" | \"lg\" | \"xl\" | \"always\";\n\n  /**\n   * Populate header cells using Arrays\n   */\n  @property({ type: Array }) tableHeaders: string[] = [];\n\n  /**\n   * Populate data cells using Arrays\n   */\n  @property({ type: Array }) tableData: Array<(string | number)[]> = [];\n\n  /** @internal */\n  @state() sortColumn: number | null = null;\n\n  /** @internal */\n  @state() sortAsc = true;\n\n  //TODO aria-sort\n\n  /** @internal */\n  @state() activeColumn: number | null = null;\n\n  /** @internal */\n  @state() sortClickCount = 0;\n\n  /** @internal */\n  @state() clickCount = 0;\n\n  /** @internal */\n  @state() originalTableData: Array<(string | number)[]> = [];\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.originalTableData = [...this.tableData];\n  }\n\n  handleHeaderClick(columnIndex: number) {\n    if (this.sort) {\n      if (this.sortColumn === columnIndex) {\n        this.sortAsc = !this.sortAsc;\n      } else {\n        this.sortColumn = columnIndex;\n        this.sortAsc = true;\n      }\n\n      this.tableData = [...this.tableData].sort((a, b) => {\n        const aValue = a[columnIndex];\n        const bValue = b[columnIndex];\n\n        if (typeof aValue === \"string\" && typeof bValue === \"string\") {\n          return this.sortAsc ? aValue.localeCompare(bValue) : bValue.localeCompare(aValue);\n        } else {\n          return this.sortAsc ? (aValue as number) - (bValue as number) : (bValue as number) - (aValue as number);\n        }\n      });\n\n      // update the active column\n      if (this.activeColumn === columnIndex) {\n        this.clickCount++;\n        if (this.clickCount === 3 && this.removableSort) {\n          this.activeColumn = null;\n          this.clickCount = 0;\n          this.tableData = [...this.originalTableData];\n        }\n      } else {\n        this.activeColumn = columnIndex;\n        this.clickCount = 1;\n      }\n\n      // add the .active class to the clicked header cell\n      const thElements = this.shadowRoot?.querySelectorAll(\"th\");\n      thElements.forEach((thElement, index) => {\n        if (index === columnIndex) {\n          thElement.classList.add(\"active\");\n        } else {\n          thElement.classList.remove(\"active\");\n        }\n      });\n    }\n  }\n\n  getIcon(columnIndex: number) {\n    if (this.activeColumn !== columnIndex) {\n      return html`<svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"16\"\n        height=\"16\"\n        fill=\"currentColor\"\n        class=\"bi bi-arrow-down-up ms-2 align-self-center\"\n        viewBox=\"0 0 16 16\"\n      >\n        <path\n          fill-rule=\"evenodd\"\n          d=\"M11.5 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L11 2.707V14.5a.5.5 0 0 0 .5.5zm-7-14a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L4 13.293V1.5a.5.5 0 0 1 .5-.5z\"\n        />\n      </svg>`;\n    } else {\n      return this.sortAsc\n        ? html`<svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"16\"\n            height=\"16\"\n            fill=\"currentColor\"\n            class=\"bi bi-sort-up-alt ms-2 align-self-center\"\n            viewBox=\"0 0 16 16\"\n          >\n            <path\n              d=\"M3.5 13.5a.5.5 0 0 1-1 0V4.707L1.354 5.854a.5.5 0 1 1-.708-.708l2-1.999.007-.007a.498.498 0 0 1 .7.006l2 2a.5.5 0 1 1-.707.708L3.5 4.707V13.5zm4-9.5a.5.5 0 0 1 0-1h1a.5.5 0 0 1 0 1h-1zm0 3a.5.5 0 0 1 0-1h3a.5.5 0 0 1 0 1h-3zm0 3a.5.5 0 0 1 0-1h5a.5.5 0 0 1 0 1h-5zM7 12.5a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1h-7a.5.5 0 0 0-.5.5z\"\n            />\n          </svg>`\n        : html`<svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"16\"\n            height=\"16\"\n            fill=\"currentColor\"\n            class=\"bi bi-sort-down ms-2 align-self-center\"\n            viewBox=\"0 0 16 16\"\n          >\n            <path\n              d=\"M3.5 2.5a.5.5 0 0 0-1 0v8.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L3.5 11.293V2.5zm3.5 1a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zM7.5 6a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5zm0 3a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3zm0 3a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1z\"\n            />\n          </svg>`;\n    }\n  }\n\n  render() {\n    return html`\n      <div\n        class=${classMap({\n          \"table-responsive\": this.responsive === \"always\",\n          \"table-responsive-sm\": this.responsive === \"sm\",\n          \"table-responsive-md\": this.responsive === \"md\",\n          \"table-responsive-lg\": this.responsive === \"lg\",\n          \"table-responsive-xl\": this.responsive === \"xl\"\n        })}\n        tabindex=\"0\"\n      >\n        <table\n          class=\"table sgds ${classMap({\n            [`table-striped`]: this.striped,\n            [`table-bordered`]: this.bordered,\n            [`table-borderless`]: this.borderless,\n            [`table-hover`]: this.hover,\n            [`table-${this.size}`]: this.size,\n            [`table-${this.variant}`]: this.variant\n          })}\"\n        >\n          <thead>\n            <tr>\n              ${this.tableHeaders.map(\n                (header: string, index: number) => html`\n                  <th\n                    class=\"${classMap({\n                      \"sortable-header\": this.sort,\n                      active: this.activeColumn === index\n                    })}\"\n                    @click=${() => this.handleHeaderClick(index)}\n                    //TODO aria-sort \n                  >\n                    ${header} ${this.sort ? this.getIcon(index) : null}\n                  </th>\n                `\n              )}\n            </tr>\n          </thead>\n          <tbody>\n            ${this.tableData.map(\n              row => html`\n                <tr>\n                  ${row.map((cell: string) => html`<td>${cell}</td>`)}\n                </tr>\n              `\n            )}\n          </tbody>\n        </table>\n      </div>\n    `;\n  }\n}\n\nexport default SgdsTable;\n"]}
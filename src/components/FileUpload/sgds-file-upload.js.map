{"version":3,"file":"sgds-file-upload.js","sourceRoot":"","sources":["sgds-file-upload.ts"],"names":[],"mappings":"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","sourcesContent":["import { ScopedElementsMixin } from \"@open-wc/scoped-elements/lit-element.js\";\nimport { html } from \"lit\";\nimport { property } from \"lit/decorators.js\";\nimport { createRef, ref } from \"lit/directives/ref.js\";\nimport { unsafeSVG } from \"lit/directives/unsafe-svg.js\";\nimport SgdsElement from \"../../base/sgds-element\";\nimport { SgdsButton } from \"../Button/sgds-button\";\nimport fileUploadStyle from \"./file-upload.css\";\nimport genId from \"../../utils/generateId\";\nimport svgStyles from \"../../styles/svg.css\";\nimport formHintStyles from \"../../styles/form-hint.css\";\nexport type FileUploadButtonVariant =\n  | \"primary\"\n  | \"secondary\"\n  | \"success\"\n  | \"danger\"\n  | \"warning\"\n  | \"info\"\n  | \"light\"\n  | \"dark\"\n  | \"link\"\n  | \"outline-primary\"\n  | \"outline-secondary\"\n  | \"outline-success\"\n  | \"outline-danger\"\n  | \"outline-warning\"\n  | \"outline-info\"\n  | \"outline-light\"\n  | \"outline-dark\";\n\n/**\n * @summary Allows users to upload files of various sizes and formats\n * @slot default - Label for file upload button\n *\n * @event sgds-files-selected - Emitted when files are selected for uploading\n *\n * @cssproperty --sgds-file-upload-file-icon-color - Left icon color\n * @cssproperty --sgds-file-upload-remove-icon-color - Remove icon color\n * @cssproperty --sgds-file-upload-remove-icon-hover-color - Remove icon hover color\n * @cssproperty --sgds-file-upload-icon-gap - The gap between the icons of file upload\n * @cssproperty --sgds-file-upload-gap - The vertical gap between elements inside the file upload\n * @cssproperty --sgds-form-hint-text-color - The color of hint text\n * @cssproperty --sgds-form-hint-text-font-size - The font size of hint text\n * @cssproperty --sgds-form-hint-text-font-weight - The font weight of hint text\n */\n\nexport class SgdsFileUpload extends ScopedElementsMixin(SgdsElement) {\n  static styles = [...SgdsElement.styles, svgStyles, formHintStyles, fileUploadStyle];\n  /**@internal */\n  static get scopedElements() {\n    return {\n      \"sgds-button\": SgdsButton\n    };\n  }\n  /** The button's variant. */\n  @property({ reflect: true }) variant: FileUploadButtonVariant = \"primary\";\n\n  //** Disable the fileuploader button */\n  @property({ type: Boolean, reflect: true })\n  disabled = false;\n\n  /** Allows multiple files to be listed for uploading */\n  @property({ type: Boolean, reflect: true })\n  multiple = false;\n\n  /** Specify the acceptable file type  */\n  @property({ type: String, reflect: true })\n  accept = \"\";\n\n  /** Specifies a large or small button */\n  @property({ reflect: true }) size: \"sm\" | \"lg\";\n\n  /** Customize the check icon with SVG */\n  @property({ type: String })\n  checkedIcon = \"\";\n\n  /** Customize the cancel icon with SVG */\n  @property({ type: String })\n  cancelIcon = \"\";\n\n  /** The input's hint text below the label */\n  @property({ reflect: true }) hintText = \"\";\n\n  /** @internal */\n  @property({ type: Object, state: true })\n  private files: FileList | undefined;\n\n  /** @internal */\n  @property({ type: Array })\n  private selectedFiles: File[] = [];\n\n  private _setFileList(files: FileList) {\n    this.files = files;\n    this.emit(\"sgds-files-selected\");\n    //Possible to pass in the files\n  }\n\n  // Create a ref to the input element\n  /** @internal */\n  private inputRef = createRef<HTMLInputElement>();\n\n  /** @internal */\n  private handleClick(event: Event) {\n    event.preventDefault();\n    if (!this.disabled) {\n      // Get a reference to the input element using the inputRef\n      const inputElement = this.inputRef.value;\n      // Do something with the input element\n      inputElement.click();\n    }\n  }\n\n  /** @internal */\n  private handleInputChange(event: Event) {\n    const inputElement = event.target as HTMLInputElement;\n    const files = inputElement.files as FileList;\n\n    if (files.length > 0) {\n      this.selectedFiles = Array.from(files);\n    }\n    // Trigger a re-render of the component to update the list of selected files\n    this._setFileList(files);\n    this.requestUpdate();\n  }\n\n  private _removeFileHandler(index: number) {\n    const inputElement = this.inputRef.value;\n    const attachments = inputElement.files;\n\n    const fileBuffer = new DataTransfer();\n    for (let i = 0; i < attachments.length; i++) {\n      if (index !== i) fileBuffer.items.add(attachments[i]);\n    }\n\n    // Assign buffer to file input\n    inputElement.files = fileBuffer.files;\n    // Re-populate selected files to the lists\n    this._setFileList(fileBuffer.files);\n    this.selectedFiles = Array.from(fileBuffer.files);\n\n    // Trigger a re-render of the component to update the list of selected files\n    this.requestUpdate();\n  }\n\n  /**@internal */\n  protected inputId: string = genId(\"input\", \"file\");\n\n  protected _renderHintText() {\n    const hintTextTemplate = html` <small id=\"${this.inputId}Help\" class=\"form-text\">${this.hintText}</small> `;\n    return this.hintText && hintTextTemplate;\n  }\n\n  private _sanitizeVariant(variant: FileUploadButtonVariant) {\n    return variant.replace(\"outline-\", \"\");\n  }\n  render() {\n    const getCheckedIcon = (checkedIcon: string) => {\n      if (checkedIcon) {\n        return html`${unsafeSVG(checkedIcon)}`;\n      }\n      return html` <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"16\"\n        height=\"16\"\n        fill=\"currentColor\"\n        class=\"bi bi-check-lg\"\n        viewBox=\"0 0 16 16\"\n      >\n        <path\n          d=\"M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z\"\n        />\n      </svg>`;\n    };\n\n    const getCancelIcon = (cancelIcon: string) => {\n      if (cancelIcon) {\n        return html`${unsafeSVG(cancelIcon)}`;\n      }\n      return html`<svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"16\"\n        height=\"16\"\n        fill=\"currentColor\"\n        class=\"bi bi-x-circle\"\n        viewBox=\"0 0 16 16\"\n      >\n        <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\" />\n        <path\n          d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"\n        />\n      </svg>`;\n    };\n\n    const listItems = this.selectedFiles.map(\n      (file, index) => html`\n        <li key=${index} class=\"fileupload-list-item\">\n          <span>${getCheckedIcon(this.checkedIcon)}</span>\n          <span class=\"filename\">${file.name}</span>\n          <span @click=${() => this._removeFileHandler(index)}>${getCancelIcon(this.cancelIcon)}</span>\n        </li>\n      `\n    );\n\n    return html`\n      <input\n        ${ref(this.inputRef)}\n        type=\"file\"\n        @change=${this.handleInputChange}\n        ?multiple=${this.multiple}\n        accept=${this.accept}\n        id=${this.inputId}\n      />\n      <div class=\"fileupload-container\">\n        <sgds-button\n          size=${this.size}\n          variant=${this._sanitizeVariant(this.variant)}\n          ?outlined=${this.variant.includes(\"outline\")}\n          ?disabled=${this.disabled}\n          @click=${this.handleClick}\n        >\n          <label for=${this.inputId} class=\"file-upload-label\"><slot></slot></label>\n        </sgds-button>\n        ${this._renderHintText()}\n        <ul class=\"sgds fileupload-list\">\n          ${listItems}\n        </ul>\n      </div>\n    `;\n  }\n}\n\nexport default SgdsFileUpload;\n"]}
import { Canvas, Meta, Story, ArgsTable } from "@storybook/addon-docs";
import { html } from "lit";
import { withWebComponentsKnobs } from "storybook-addon-web-components-knobs";
import { withKnobs, text, number } from "@storybook/addon-knobs";
import "../lib/Dropdown";
import { partDescription } from "./common";

<Meta
  title="Components/Dropdown"
  argTypes={{
    drop: {
      control: "select",
      options: ["down", "up", "left", "right"],
      defaultValue: "down",
      description: "The drop position of menu relative to the toggle button",
      table: {
        category: "props: SgdsDropdown",
        defaultValue: { summary: "down" },
        type: {
          summary: "DropDirection",
        },
      },
    },
    menuAlignRight: {
      control: "boolean",
      description:
        "When true, aligns right edge of menu with right edge of button ",
      table: {
        defaultValue: { summary: "false" },
        category: "props: SgdsDropdown",
        type: { summary: "boolean" },
      },
    },
    menuIsOpen: {
      control: "disable",
      description: "When true, dropdown menu shows on first load",
      table: {
        defaultValue: { summary: "false" },
        category: "props: SgdsDropdown",
        type: { summary: "boolean" },
      },
    },
    noFlip: {
      control: "boolean",
      description: "Controls auto-flipping of menu",
      table: {
        category: "props: SgdsDropdown",
        type: {
          defaultValue: { summary: "false" },
          summary: "boolean",
        },
      },
    },
    popperOpts: {
      control: "object",
      description:
        "Additional configuration to pass to Popper.js. See https://popper.js.org/ for config opts",
      table: {
        category: "props: SgdsDropdown",
        defaultValue: { summary: "{}" },
        type: {
          summary: "object",
        },
      },
    },
    toggleBtnId: {
      control: "text",
      description:
        "Forwards value to id attribute of toggle button of Dropdown. An unique id generated by default",
      table: {
        category: "props: SgdsDropdown",
      },
    },
    buttonText: {
      control: "text",
      description: "Sets the text content of Dropdown button ",
      table: {
        defaultValue: { summary: "" },
        category: "props: SgdsDropdown",
        type: {
          summary: "string",
        },
      },
    },
    variant: {
      control: "select",
      description: "Sets color of Dropdown button",
      options: [
        "primary",
        "secondary",
        "success",
        "danger",
        "warning",
        "info",
        "light",
        "dark",
      ],
      table: {
        category: "props: SgdsDropdown",
        defaultValue: { summary: "secondary" },
        type: {
          summary: "DropdownButtonVariant",
        },
      },
    },
    value: {
      control: "text",
      description:
        "The value of selected SgdsDropdownItem (if defined). Use event listener `sgds-select` to obtain value of SgdsDropdown",
      table: {
        defaultValue: { summary: "undefined" },
        category: "props: SgdsDropdown",
        type: {
          summary: "string",
        },
      },
    },
    close: {
      control: "select",
      options: ["default", "outside", "inside"],
      description:
        "Controls the close behaviour of dropdown menu. By default menu auto-closes when SgdsDropdownItem or area outside dropdown is clicked",
      table: {
        defaultValue: { summary: "default" },
        category: "props: SgdsDropdown",
        type: {
          summary: "string",
        },
      },
    },
    default: {
      description: "default slot for SgdsDropdownItem element",
      table: {
        category: "slot: SgdsDropdown",
      },
    },
    "sgds-select": {
      description:
        "Emitted event from SgdsDropdown element when a the slot item is selected/clicked",
      table: {
        category: "Event: SgdsDropdown",
      },
    },
    "sgds-show": {
      description: "Emitted event when show instance is called ",
      table: {
        category: "Event: SgdsDropdown",
      },
    },
    "sgds-shown": {
      description:
        "Emitted event when dropdown has been made visible to the user and CSS transitions have completed",
      table: {
        category: "Event: SgdsDropdown",
      },
    },
    "sgds-hide": {
      description: "Emitted event when hide instance is called",
      table: {
        category: "Event: SgdsDropdown",
      },
    },
    "sgds-hide": {
      description:
        "Emitted event when the dropdown has finished being hidden from the user and CSS transitions have completed",
      table: {
        category: "Event: SgdsDropdown",
      },
    },
    toggle: {
      table: { category: "part: SgdsDropdown" },
      description: partDescription,
    },
    menu: {
      table: { category: "part: SgdsDropdown" },
      description: partDescription,
    },
    showMenu: {
      control: "disable",
      description: "When invoked, opens the dropdown menu",
      table: {
        category: "methods: SgdsDropdown",
        type: {
          summary: "function",
        },
      },
    },
    hideMenu: {
      control: "disable",
      description: "When invoked, hides the dropdown menu",
      table: {
        category: "methods: SgdsDropdown",
        type: {
          summary: "function",
        },
      },
    },
    // sgds-dropdown-item
    active: {
      control: "boolean",
      description: "when true, sets the active stylings of .dropdown-item",
      table: {
        category: "props: SgdsDropdownItem",
        defaultValue: { summary: false },
        type: {
          summary: "boolean",
        },
      },
    },
    href: {
      control: "text",
      description: "Href attribute for anchor element in SgdsDropdownItem",
      table: {
        defaultValue: { summary: "" },
        category: "props: SgdsDropdownItem",
        type: {
          summary: "string",
        },
      },
    },
    disabled: {
      control: "boolean",
      description: "Disables the dropdown item when true",
      table: {
        defaultValue: { summary: "false" },
        category: "props: SgdsDropdownItem",
        type: {
          summary: "string",
        },
      },
    },
    valueDI: {
      name: "value",
      control: "text",
      description: "Value of SgdsDropdownItem",
      table: {
        defaultValue: { summary: "undefined" },
        category: "props: SgdsDropdownItem",
        type: {
          summary: "string",
        },
      },
    },
  }}
/>

export const Template = ({
  noFlip,
  menuAlignRight,
  drop,
  popperOpts,
  toggleBtnId,
  buttonText,
  variant,
  active,
  href,
  disabled,
  value,
  close,
  menuIsOpen
}) => {
  const listen = window.addEventListener("sgds-select", (e) => {
    console.log(e.target);
  });
  return html`
    <div class="d-flex justify-content-center" style=" margin: 100px;">
      <sgds-dropdown
        .buttonText=${buttonText}
        .noFlip=${noFlip}
        .drop=${drop}
        .menuAlignRight=${menuAlignRight}
        .popperOpts=${popperOpts}
        .toggleBtnId=${toggleBtnId}
        .variant=${variant}
        .close=${close}
        .menuIsOpen=${menuIsOpen}
      >
        <sgds-dropdown-item
          .value=${value}
          disabled
          .href=${href}
          .active=${active}
          >item #1 (argsTable controlled)</sgds-dropdown-item
        >
        <sgds-dropdown-item href="#" value="2">item #2</sgds-dropdown-item>
        <sgds-dropdown-item href="#" value="3" disabled
          >item #3</sgds-dropdown-item
        >
        <sgds-dropdown-item href="#" value="3">item #3</sgds-dropdown-item>
        <sgds-dropdown-item href="#" value="3" disabled
          >item #3</sgds-dropdown-item
        >
      </sgds-dropdown>
    </div>
  `;
};

# Sample

This is the sample file for MDX

<Story
  name="Basic"
  args={{
    buttonText: "Dropdown",
    variant: "secondary",
    href: "#",
    valueDI: "1",
    menuIsOpen: true
  }}
>
  {Template.bind({})}
</Story>

<ArgsTable story="Basic" />
